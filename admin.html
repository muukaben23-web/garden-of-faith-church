<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Garden of Faith Church</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script>
        // Authentication check
        window.addEventListener('load', function() {
            const isAuthenticated = sessionStorage.getItem('adminAuthenticated');
            const loginTime = sessionStorage.getItem('loginTime');
            
            if (isAuthenticated !== 'true' || !loginTime) {
                window.location.href = 'login.html';
                return;
            }
            
            const currentTime = new Date().getTime();
            const timeDiff = currentTime - parseInt(loginTime);
            
            // Session expires after 2 hours
            if (timeDiff > 2 * 60 * 60 * 1000) {
                sessionStorage.removeItem('adminAuthenticated');
                sessionStorage.removeItem('loginTime');
                window.location.href = 'login.html';
            }
        });
    </script>
    <style>
        :root {
            --admin-primary: #0056b3;
            --admin-dark: #003d82;
            --admin-light: #e7f3ff;
            --admin-success: #28a745;
            --admin-warning: #ffc107;
            --admin-danger: #dc3545;
        }

        body {
            background: #f8f9fa;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .admin-sidebar {
            background: var(--admin-primary);
            min-height: 100vh;
            color: white;
            position: fixed;
            left: 0;
            top: 0;
            width: 250px;
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .admin-sidebar.collapsed {
            width: 70px;
        }

        .admin-content {
            margin-left: 250px;
            transition: all 0.3s ease;
        }

        .admin-content.expanded {
            margin-left: 70px;
        }

        .sidebar-header {
            padding: 1.5rem;
            background: var(--admin-dark);
            text-align: center;
        }

        .sidebar-menu {
            padding: 1rem 0;
        }

        .sidebar-item {
            padding: 0.75rem 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .sidebar-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .sidebar-item.active {
            background: rgba(255, 255, 255, 0.2);
            border-left: 4px solid white;
        }

        .admin-header {
            background: white;
            padding: 1rem 2rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .content-section {
            display: none;
            padding: 2rem;
            animation: fadeIn 0.3s ease;
        }

        .content-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .admin-card {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 1.5rem;
        }

        .form-control:focus {
            border-color: var(--admin-primary);
            box-shadow: 0 0 0 0.2rem rgba(0, 86, 179, 0.25);
        }

        .btn-admin {
            background: var(--admin-primary);
            color: white;
            border: none;
            padding: 0.5rem 1.5rem;
            border-radius: 5px;
            transition: all 0.3s ease;
        }

        .btn-admin:hover {
            background: var(--admin-dark);
            transform: translateY(-2px);
        }

        .toggle-sidebar {
            background: var(--admin-primary);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            cursor: pointer;
        }

        .service-item {
            background: var(--admin-light);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            position: relative;
        }

        .delete-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: var(--admin-danger);
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            cursor: pointer;
        }

        .prayer-item-admin {
            background: white;
            border: 1px solid #ddd;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
        }

        .gallery-item-admin {
            background: white;
            border: 1px solid #ddd;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            text-align: center;
        }

        .message-item {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin-bottom: 1rem;
            padding: 1rem;
            transition: all 0.3s ease;
        }

        .message-item.unread {
            border-left: 4px solid var(--admin-primary);
            background: #f8f9ff;
        }

        .message-header {
            margin-bottom: 0.5rem;
        }

        .message-contact {
            background: #f8f9fa;
            padding: 0.5rem;
            border-radius: 5px;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }

        .message-content {
            margin-bottom: 0.5rem;
        }

        .message-actions {
            display: flex;
            gap: 0.25rem;
        }

        .upload-area {
            border: 2px dashed #ddd;
            border-radius: 10px;
            padding: 3rem;
            text-align: center;
            background: #f8f9fa;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .upload-area:hover {
            border-color: var(--admin-primary);
            background: #e7f3ff;
        }

        .upload-area.dragover {
            border-color: var(--admin-primary);
            background: #e7f3ff;
            transform: scale(1.02);
        }

        .gallery-grid-admin {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 1rem;
        }

        .gallery-item-admin {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .gallery-item-admin:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .prayer-item-pending {
            background: #fff3cd;
            border: 1px solid #ffc107;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            border-left: 4px solid #ffc107;
        }

        .prayer-item-approved {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            border-left: 4px solid #28a745;
        }

        .prayer-actions-admin {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }

        .prayer-content {
            margin-bottom: 0.5rem;
        }

        .prayer-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .prayer-status {
            font-size: 0.8rem;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-weight: bold;
        }

        .status-pending {
            background: #ffc107;
            color: #000;
        }

        .status-approved {
            background: #28a745;
            color: white;
        }

        .gallery-image-container {
            position: relative;
            height: 200px;
            overflow: hidden;
        }

        .gallery-thumb {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .gallery-overlay-admin {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .gallery-image-container:hover .gallery-overlay-admin {
            opacity: 1;
        }

        .gallery-info {
            padding: 1rem;
        }

        .gallery-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }

        .stat-card {
            background: linear-gradient(135deg, var(--admin-primary), var(--admin-dark));
            color: white;
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
        }

        .stat-card h6 {
            margin: 0 0 0.5rem 0;
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .stat-number {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .batch-preview {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .batch-preview-item {
            position: relative;
            border-radius: 5px;
            overflow: hidden;
            height: 80px;
        }

        .batch-preview-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .batch-preview-item .remove-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            background: var(--admin-danger);
            color: white;
            border: none;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Picture Slot Manager Styles */
        .picture-slot-manager {
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 2rem;
            background: #f8f9fa;
        }

        .current-picture-display {
            margin-bottom: 2rem;
        }

        .picture-preview-container {
            position: relative;
            display: inline-block;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .picture-preview {
            max-width: 100%;
            height: auto;
            display: block;
        }

        .picture-overlay-info {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 0.5rem;
            border-radius: 5px;
            font-size: 0.8rem;
        }

        .picture-dimensions {
            margin-bottom: 0.2rem;
        }

        .picture-status {
            color: #28a745;
            font-weight: bold;
        }

        .picture-upload-controls {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .upload-area-enhanced {
            border: 2px dashed var(--admin-primary);
            border-radius: 10px;
            padding: 2rem;
            text-align: center;
            background: white;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .upload-area-enhanced:hover {
            border-color: var(--admin-dark);
            background: #f0f8ff;
        }

        .upload-area-enhanced.dragover {
            border-color: var(--admin-dark);
            background: #e7f3ff;
            transform: scale(1.02);
        }

        .picture-info-panel {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            border: 1px solid #e0e0e0;
        }

        .picture-guidelines {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .picture-guidelines li {
            padding: 0.3rem 0;
            font-size: 0.9rem;
        }

        .picture-actions-bar {
            display: flex;
            gap: 0.5rem;
            padding-top: 1rem;
            border-top: 1px solid #e0e0e0;
        }

        @media (max-width: 768px) {
            .admin-sidebar {
                transform: translateX(-100%);
            }
            
            .admin-sidebar.show {
                transform: translateX(0);
            }
            
            .admin-content {
                margin-left: 0;
            }
        }
    </style>
</head>
<body>
    <!-- Admin Sidebar -->
    <div class="admin-sidebar" id="sidebar">
        <div class="sidebar-header">
            <h4 class="text-white mb-0">Admin Panel</h4>
        </div>
        <nav class="sidebar-nav">
            <a href="#" class="sidebar-item" data-section="dashboard">
                <i class="fas fa-tachometer-alt me-2"></i>Dashboard
            </a>
            <a href="#" class="sidebar-item" data-section="theme">
                <i class="fas fa-calendar-alt me-2"></i>Yearly Theme
            </a>
            <a href="#" class="sidebar-item" data-section="services">
                <i class="fas fa-church me-2"></i>Services
            </a>
            <a href="#" class="sidebar-item" data-section="pictures">
                <i class="fas fa-images me-2"></i>Service Pictures
            </a>
            <a href="#" class="sidebar-item" data-section="about">
                <i class="fas fa-info-circle me-2"></i>About
            </a>
            <a href="#" class="sidebar-item" data-section="prayer">
                <i class="fas fa-pray me-2"></i>Prayer Wall
            </a>
            <a href="#" class="sidebar-item" data-section="gallery">
                <i class="fas fa-images me-2"></i>Gallery
            </a>
            <a href="#" class="sidebar-item" data-section="messages">
                <i class="fas fa-envelope me-2"></i>Messages
                <span class="badge bg-danger" id="messageCount" style="display: none;">0</span>
            </a>
            <a href="#" class="sidebar-item" data-section="contact">
                <i class="fas fa-phone me-2"></i>Contact
            </a>
            <a href="#" class="sidebar-item" data-section="settings">
                <i class="fas fa-cog me-2"></i>Settings
            </a>
        </nav>
    </div>

    <!-- Admin Content -->
    <div class="admin-content" id="adminContent">
        <!-- Admin Header -->
        <div class="admin-header">
            <div>
                <button class="toggle-sidebar" id="toggleSidebar">
                    <i class="fas fa-bars"></i>
                </button>
                <h5 class="d-inline-block ms-3 mb-0">Garden of Faith Church Admin</h5>
                <span class="badge bg-danger ms-3" id="notificationBadge" style="display: none;">0</span>
            </div>
            <div>
                <button class="btn btn-sm btn-outline-primary me-2" onclick="previewSite()">
                    <i class="fas fa-eye"></i> Preview Site
                </button>
                <button class="btn btn-sm btn-success me-2" onclick="saveAllChanges()">
                    <i class="fas fa-save"></i> Save All Changes
                </button>
                <button class="btn btn-sm btn-danger" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
        </div>

        <!-- Dashboard Section -->
        <div class="content-section active" id="dashboard">
            <h2 class="mb-4">Dashboard Overview</h2>
            
            <!-- Real-time Notifications -->
            <div class="admin-card" id="notificationPanel" style="display: none; background: #d4edda; border-left: 4px solid #28a745;">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h6 class="mb-1"><i class="fas fa-bell me-2"></i>New Prayer Request</h6>
                        <p class="mb-0" id="notificationText">Someone just added a new prayer request</p>
                    </div>
                    <button class="btn btn-sm btn-outline-success" onclick="dismissNotification()">Dismiss</button>
                </div>
            </div>

            <div class="row">
                <div class="col-md-3">
                    <div class="admin-card text-center">
                        <h3 class="text-primary" id="activeServicesCount">6</h3>
                        <p>Active Services</p>
                        <small class="text-muted">This week</small>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="admin-card text-center">
                        <h3 class="text-success" id="prayerCount">0</h3>
                        <p>Prayer Requests</p>
                        <small class="text-muted">Total</small>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="admin-card text-center">
                        <h3 class="text-warning" id="galleryCount">1</h3>
                        <p>Gallery Items</p>
                        <small class="text-muted">Images</small>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="admin-card text-center">
                        <h3 class="text-info" id="messageStat">0</h3>
                        <p>Messages</p>
                        <small class="text-muted">Received</small>
                    </div>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-3">
                    <div class="admin-card text-center">
                        <h3 class="text-info" id="todayServicesCount">2</h3>
                        <p>Services Today</p>
                        <small class="text-muted" id="currentDate">Today</small>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="admin-card text-center">
                        <h3 class="text-danger" id="unreadMessagesCount">0</h3>
                        <p>Unread Messages</p>
                        <small class="text-muted">Pending</small>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="admin-card text-center">
                        <h3 class="text-primary" id="totalContactsCount">0</h3>
                        <p>Total Contacts</p>
                        <small class="text-muted">In database</small>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="admin-card text-center">
                        <h3 class="text-success" id="activeUsersCount">0</h3>
                        <p>Active Users</p>
                        <small class="text-muted">Online now</small>
                    </div>
                </div>
            </div>
            
            <!-- Active Services Today -->
            <div class="admin-card">
                <h5><i class="fas fa-calendar-day me-2"></i>Services Today</h5>
                <div id="todayServices">
                    <div class="alert alert-info">
                        <i class="fas fa-clock me-2"></i>
                        <strong>Discipleship Class</strong> - 6:00 PM - 8:00 PM
                        <button class="btn btn-sm btn-outline-primary float-end">Manage</button>
                    </div>
                </div>
            </div>
            
            <!-- Recent Prayer Requests -->
            <div class="admin-card">
                <h5><i class="fas fa-pray me-2"></i>Recent Prayer Requests</h5>
                <div id="recentPrayers">
                    <div class="text-center text-muted py-4">
                        <i class="fas fa-pray fa-2x mb-3"></i>
                        <p>No prayer requests yet</p>
                        <small>Prayer requests from the website will appear here</small>
                    </div>
                </div>
                <button class="btn btn-sm btn-outline-primary mt-2" onclick="switchToSection('prayer')">
                    Manage Prayer Requests
                </button>
            </div>
            
            <div class="admin-card">
                <h5>Recent Activity</h5>
                <ul class="list-unstyled" id="activityLog">
                    <li class="mb-2"><i class="fas fa-clock text-muted me-2"></i> New prayer request added 2 minutes ago</li>
                    <li class="mb-2"><i class="fas fa-edit text-muted me-2"></i> Service times updated yesterday</li>
                    <li class="mb-2"><i class="fas fa-image text-muted me-2"></i> Gallery updated 3 days ago</li>
                </ul>
            </div>
        </div>

        <!-- Yearly Theme Section -->
        <div class="content-section" id="theme">
            <h2 class="mb-4">Manage Yearly Theme</h2>
            <div class="admin-card">
                <h5><i class="fas fa-calendar-alt me-2"></i>2026 Theme Settings</h5>
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label class="form-label">Theme Title</label>
                        <input type="text" class="form-control" id="themeTitle" value="BE STRONG; FEAR NOT!" placeholder="Enter theme title">
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Theme Year</label>
                        <input type="number" class="form-control" id="themeYear" value="2026" placeholder="Enter year">
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-12">
                        <label class="form-label">Theme Tagline</label>
                        <input type="text" class="form-control" id="themeTagline" value="Strength in Faith" placeholder="Enter theme tagline">
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-12">
                        <label class="form-label">Bible Verse</label>
                        <textarea class="form-control" id="themeVerse" rows="2" placeholder="Enter bible verse">"Say to those who have an anxious heart, 'Be strong, fear not! Your God will come and save you.'" - Isaiah 35:4</textarea>
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-12">
                        <label class="form-label">Theme Description</label>
                        <textarea class="form-control" id="themeDescription" rows="3" placeholder="Enter theme description">This year, we are called to stand firm in faith, knowing that God is our strength and our salvation. In times of uncertainty, we find courage in His promises and power in His presence. Join us as we embrace bold faith and overcome fear through the strength that comes from above.</textarea>
                    </div>
                </div>
                
                <!-- Theme Highlights -->
                <div class="row mb-3">
                    <div class="col-md-12">
                        <label class="form-label">Theme Highlights</label>
                        <div id="themeHighlights">
                            <div class="highlight-input-group mb-2">
                                <div class="input-group">
                                    <span class="input-group-text"><i class="fas fa-shield-alt"></i></span>
                                    <input type="text" class="form-control" value="Standing firm in God's promises" placeholder="Enter highlight">
                                    <button class="btn btn-outline-danger" onclick="removeHighlight(this)">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="highlight-input-group mb-2">
                                <div class="input-group">
                                    <span class="input-group-text"><i class="fas fa-heart"></i></span>
                                    <input type="text" class="form-control" value="Overcoming fear through faith" placeholder="Enter highlight">
                                    <button class="btn btn-outline-danger" onclick="removeHighlight(this)">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="highlight-input-group mb-2">
                                <div class="input-group">
                                    <span class="input-group-text"><i class="fas fa-dumbbell"></i></span>
                                    <input type="text" class="form-control" value="Finding strength in God's presence" placeholder="Enter highlight">
                                    <button class="btn btn-outline-danger" onclick="removeHighlight(this)">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <button class="btn btn-sm btn-outline-primary mt-2" onclick="addThemeHighlight()">
                            <i class="fas fa-plus me-1"></i>Add Highlight
                        </button>
                    </div>
                </div>
                
                <div class="row">
                    <div class="col-md-12">
                        <button class="btn btn-success" onclick="saveTheme()">
                            <i class="fas fa-save me-2"></i>Save Theme Changes
                        </button>
                        <button class="btn btn-outline-secondary ms-2" onclick="previewTheme()">
                            <i class="fas fa-eye me-2"></i>Preview on Website
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Messages Section -->
        <div class="content-section" id="messages">
            <h2 class="mb-4">Manage Messages</h2>
            <div class="admin-card">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h5><i class="fas fa-envelope me-2"></i>Received Messages</h5>
                    <div>
                        <button class="btn btn-sm btn-outline-danger me-2" onclick="deleteAllMessages()">
                            <i class="fas fa-trash-alt me-1"></i>Delete All
                        </button>
                        <button class="btn btn-sm btn-outline-primary me-2" onclick="exportMessages()">
                            <i class="fas fa-download me-1"></i>Export
                        </button>
                    </div>
                </div>
                <div class="mb-3">
                    <div class="row">
                        <div class="col-md-6">
                            <input type="text" class="form-control" id="messageSearch" placeholder="Search messages...">
                        </div>
                        <div class="col-md-3">
                            <select class="form-control" id="messageFilter">
                                <option value="all">All Messages</option>
                                <option value="general">General Inquiry</option>
                                <option value="prayer">Prayer Request</option>
                                <option value="visit">Visit Request</option>
                                <option value="ministry">Ministry Information</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <button class="btn btn-admin w-100" onclick="markAllAsRead()">
                                <i class="fas fa-check-double me-2"></i>Mark All as Read
                            </button>
                        </div>
                    </div>
                </div>
                <div id="messagesList">
                    <div class="text-center text-muted py-4">
                        <i class="fas fa-inbox fa-3x mb-3"></i>
                        <p>No messages received yet</p>
                        <small>Messages from the contact form will appear here</small>
                    </div>
                </div>
            </div>
        </div>

        <!-- Services Section -->
        <div class="content-section" id="services">
            <h2 class="mb-4">Manage Services</h2>
            <div class="admin-card">
                <h5>Current Services</h5>
                <div id="servicesList">
                    <div class="service-item">
                        <button class="delete-btn" onclick="deleteService(this)">Ã—</button>
                        <div class="row">
                            <div class="col-md-3">
                                <input type="text" class="form-control" placeholder="Service Name" value="Sunday Service">
                            </div>
                            <div class="col-md-2">
                                <input type="text" class="form-control" placeholder="Day" value="Sunday">
                            </div>
                            <div class="col-md-3">
                                <input type="text" class="form-control" placeholder="Time" value="8:00 AM - 11:00 AM">
                            </div>
                            <div class="col-md-4">
                                <input type="text" class="form-control" placeholder="Description" value="Main worship service">
                            </div>
                        </div>
                    </div>
                </div>
                <button class="btn btn-admin mt-3" onclick="addService()">
                    <i class="fas fa-plus me-2"></i>Add New Service
                </button>
            </div>
        </div>

        <!-- Service Pictures Management Section -->
        <div class="content-section" id="pictures">
            <h2 class="mb-4">Manage Service Pictures</h2>
            <div class="admin-card">
                <h5><i class="fas fa-images me-2"></i>Service Image Management</h5>
                <p class="text-muted mb-4">Upload and manage images for all church services. These images will appear on the services page.</p>
                
                <!-- Sunday Service Picture -->
                <div class="row mb-4">
                    <div class="col-md-6">
                        <label class="form-label"><i class="fas fa-church me-2"></i>Sunday Service</label>
                        <div class="picture-slot-manager">
                            <div class="current-picture-display">
                                <div class="picture-preview-container">
                                    <img src="https://via.placeholder.com/600x400/0056b3/ffffff?text=Sunday+Service" 
                                         alt="Sunday Service Picture" 
                                         class="img-fluid rounded shadow picture-preview" 
                                         id="sundayServicePicture">
                                    <div class="picture-overlay-info">
                                        <div class="picture-dimensions">600x400px</div>
                                        <div class="picture-status">Active</div>
                                    </div>
                                </div>
                            </div>
                            <div class="picture-upload-controls">
                                <div class="upload-area-enhanced" id="sundayUploadArea">
                                    <div class="upload-content">
                                        <i class="fas fa-cloud-upload-alt fa-3x text-primary mb-3"></i>
                                        <h5>Drop Sunday Service Picture Here</h5>
                                        <p class="text-muted">or click to browse (Recommended: 600x400px)</p>
                                        <input type="file" id="sundayServiceUpload" accept="image/*" style="display: none;">
                                        <button class="btn btn-primary" onclick="document.getElementById('sundayServiceUpload').click()">
                                            <i class="fas fa-folder-open me-2"></i>Choose Picture
                                        </button>
                                    </div>
                                </div>
                                <div class="picture-actions-bar">
                                    <button class="btn btn-outline-primary" onclick="previewServicePicture('sunday')">
                                        <i class="fas fa-expand me-2"></i>Full Preview
                                    </button>
                                    <button class="btn btn-outline-secondary" onclick="resetServicePicture('sunday')">
                                        <i class="fas fa-undo me-2"></i>Reset to Default
                                    </button>
                                    <button class="btn btn-outline-info" onclick="downloadServicePicture('sunday')">
                                        <i class="fas fa-download me-2"></i>Download Current
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                <!-- Bible Study Picture -->
                <div class="row mb-4">
                    <div class="col-md-6">
                        <label class="form-label"><i class="fas fa-bible me-2"></i>Bible Study</label>
                        <div class="picture-slot-manager">
                            <div class="current-picture-display">
                                <div class="picture-preview-container">
                                    <img src="https://via.placeholder.com/600x400/007bff/ffffff?text=Bible+Study" 
                                         alt="Bible Study Picture" 
                                         class="img-fluid rounded shadow picture-preview" 
                                         id="bibleStudyPicture">
                                    <div class="picture-overlay-info">
                                        <div class="picture-dimensions">600x400px</div>
                                        <div class="picture-status">Active</div>
                                    </div>
                                </div>
                            </div>
                            <div class="picture-upload-controls">
                                <div class="upload-area-enhanced" id="bibleUploadArea">
                                    <div class="upload-content">
                                        <i class="fas fa-cloud-upload-alt fa-3x text-primary mb-3"></i>
                                        <h5>Drop Bible Study Picture Here</h5>
                                        <p class="text-muted">or click to browse (Recommended: 600x400px)</p>
                                        <input type="file" id="bibleStudyUpload" accept="image/*" style="display: none;">
                                        <button class="btn btn-primary" onclick="document.getElementById('bibleStudyUpload').click()">
                                            <i class="fas fa-folder-open me-2"></i>Choose Picture
                                        </button>
                                    </div>
                                </div>
                                <div class="picture-actions-bar">
                                    <button class="btn btn-outline-primary" onclick="previewServicePicture('bible')">
                                        <i class="fas fa-expand me-2"></i>Full Preview
                                    </button>
                                    <button class="btn btn-outline-secondary" onclick="resetServicePicture('bible')">
                                        <i class="fas fa-undo me-2"></i>Reset to Default
                                    </button>
                                    <button class="btn btn-outline-info" onclick="downloadServicePicture('bible')">
                                        <i class="fas fa-download me-2"></i>Download Current
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Women's Fellowship Picture -->
                <div class="row mb-4">
                    <div class="col-md-6">
                        <label class="form-label"><i class="fas fa-users me-2"></i>Women's Fellowship</label>
                        <div class="picture-slot-manager">
                            <div class="current-picture-display">
                                <div class="picture-preview-container">
                                    <img src="https://via.placeholder.com/600x400/e91e63/ffffff?text=Women%27s+Fellowship" 
                                         alt="Women's Fellowship Picture" 
                                         class="img-fluid rounded shadow picture-preview" 
                                         id="womenFellowshipPicture">
                                    <div class="picture-overlay-info">
                                        <div class="picture-dimensions">600x400px</div>
                                        <div class="picture-status">Active</div>
                                    </div>
                                </div>
                            </div>
                            <div class="picture-upload-controls">
                                <div class="upload-area-enhanced" id="womenUploadArea">
                                    <div class="upload-content">
                                        <i class="fas fa-cloud-upload-alt fa-3x text-primary mb-3"></i>
                                        <h5>Drop Women's Fellowship Picture Here</h5>
                                        <p class="text-muted">or click to browse (Recommended: 600x400px)</p>
                                        <input type="file" id="womenFellowshipUpload" accept="image/*" style="display: none;">
                                        <button class="btn btn-primary" onclick="document.getElementById('womenFellowshipUpload').click()">
                                            <i class="fas fa-folder-open me-2"></i>Choose Picture
                                        </button>
                                    </div>
                                </div>
                                <div class="picture-actions-bar">
                                    <button class="btn btn-outline-primary" onclick="previewServicePicture('women')">
                                        <i class="fas fa-expand me-2"></i>Full Preview
                                    </button>
                                    <button class="btn btn-outline-secondary" onclick="resetServicePicture('women')">
                                        <i class="fas fa-undo me-2"></i>Reset to Default
                                    </button>
                                    <button class="btn btn-outline-info" onclick="downloadServicePicture('women')">
                                        <i class="fas fa-download me-2"></i>Download Current
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Discipleship Class Picture -->
                <div class="row mb-4">
                    <div class="col-md-6">
                        <label class="form-label"><i class="fas fa-graduation-cap me-2"></i>Discipleship Class</label>
                        <div class="picture-slot-manager">
                            <div class="current-picture-display">
                                <div class="picture-preview-container">
                                    <img src="https://via.placeholder.com/600x400/4caf50/ffffff?text=Discipleship+Class" 
                                         alt="Discipleship Class Picture" 
                                         class="img-fluid rounded shadow picture-preview" 
                                         id="discipleshipPicture">
                                    <div class="picture-overlay-info">
                                        <div class="picture-dimensions">600x400px</div>
                                        <div class="picture-status">Active</div>
                                    </div>
                                </div>
                            </div>
                            <div class="picture-upload-controls">
                                <div class="upload-area-enhanced" id="discipleshipUploadArea">
                                    <div class="upload-content">
                                        <i class="fas fa-cloud-upload-alt fa-3x text-primary mb-3"></i>
                                        <h5>Drop Discipleship Class Picture Here</h5>
                                        <p class="text-muted">or click to browse (Recommended: 600x400px)</p>
                                        <input type="file" id="discipleshipUpload" accept="image/*" style="display: none;">
                                        <button class="btn btn-primary" onclick="document.getElementById('discipleshipUpload').click()">
                                            <i class="fas fa-folder-open me-2"></i>Choose Picture
                                        </button>
                                    </div>
                                </div>
                                <div class="picture-actions-bar">
                                    <button class="btn btn-outline-primary" onclick="previewServicePicture('discipleship')">
                                        <i class="fas fa-expand me-2"></i>Full Preview
                                    </button>
                                    <button class="btn btn-outline-secondary" onclick="resetServicePicture('discipleship')">
                                        <i class="fas fa-undo me-2"></i>Reset to Default
                                    </button>
                                    <button class="btn btn-outline-info" onclick="downloadServicePicture('discipleship')">
                                        <i class="fas fa-download me-2"></i>Download Current
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Youth Fellowship Picture -->
                <div class="row mb-4">
                    <div class="col-md-6">
                        <label class="form-label"><i class="fas fa-young me-2"></i>Youth Fellowship</label>
                        <div class="picture-slot-manager">
                            <div class="current-picture-display">
                                <div class="picture-preview-container">
                                    <img src="youth.jpeg" 
                                         alt="Youth Fellowship Picture" 
                                         class="img-fluid rounded shadow picture-preview" 
                                         id="youthFellowshipPicture">
                                    <div class="picture-overlay-info">
                                        <div class="picture-dimensions">Custom upload</div>
                                        <div class="picture-status">Updated</div>
                                    </div>
                                </div>
                            </div>
                            <div class="picture-upload-controls">
                                <div class="upload-area-enhanced" id="youthUploadArea">
                                    <div class="upload-content">
                                        <i class="fas fa-cloud-upload-alt fa-3x text-primary mb-3"></i>
                                        <h5>Drop Youth Fellowship Picture Here</h5>
                                        <p class="text-muted">or click to browse (Recommended: 600x400px)</p>
                                        <input type="file" id="youthFellowshipUpload" accept="image/*" style="display: none;">
                                        <button class="btn btn-primary" onclick="document.getElementById('youthFellowshipUpload').click()">
                                            <i class="fas fa-folder-open me-2"></i>Choose Picture
                                        </button>
                                    </div>
                                </div>
                                <div class="picture-actions-bar">
                                    <button class="btn btn-outline-primary" onclick="previewServicePicture('youth')">
                                        <i class="fas fa-expand me-2"></i>Full Preview
                                    </button>
                                    <button class="btn btn-outline-secondary" onclick="resetServicePicture('youth')">
                                        <i class="fas fa-undo me-2"></i>Reset to Default
                                    </button>
                                    <button class="btn btn-outline-info" onclick="downloadServicePicture('youth')">
                                        <i class="fas fa-download me-2"></i>Download Current
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Praise Rehearsals Picture -->
                <div class="row mb-4">
                    <div class="col-md-6">
                        <label class="form-label"><i class="fas fa-music me-2"></i>Praise Rehearsals</label>
                        <div class="picture-slot-manager">
                            <div class="current-picture-display">
                                <div class="picture-preview-container">
                                    <img src="https://via.placeholder.com/600x400/ff9800/ffffff?text=Praise+Rehearsals" 
                                         alt="Praise Rehearsals Picture" 
                                         class="img-fluid rounded shadow picture-preview" 
                                         id="praiseRehearsalsPicture">
                                    <div class="picture-overlay-info">
                                        <div class="picture-dimensions">600x400px</div>
                                        <div class="picture-status">Active</div>
                                    </div>
                                </div>
                            </div>
                            <div class="picture-upload-controls">
                                <div class="upload-area-enhanced" id="praiseUploadArea">
                                    <div class="upload-content">
                                        <i class="fas fa-cloud-upload-alt fa-3x text-primary mb-3"></i>
                                        <h5>Drop Praise Rehearsals Picture Here</h5>
                                        <p class="text-muted">or click to browse (Recommended: 600x400px)</p>
                                        <input type="file" id="praiseRehearsalsUpload" accept="image/*" style="display: none;">
                                        <button class="btn btn-primary" onclick="document.getElementById('praiseRehearsalsUpload').click()">
                                            <i class="fas fa-folder-open me-2"></i>Choose Picture
                                        </button>
                                    </div>
                                </div>
                                <div class="picture-actions-bar">
                                    <button class="btn btn-outline-primary" onclick="previewServicePicture('praise')">
                                        <i class="fas fa-expand me-2"></i>Full Preview
                                    </button>
                                    <button class="btn btn-outline-secondary" onclick="resetServicePicture('praise')">
                                        <i class="fas fa-undo me-2"></i>Reset to Default
                                    </button>
                                    <button class="btn btn-outline-info" onclick="downloadServicePicture('praise')">
                                        <i class="fas fa-download me-2"></i>Download Current
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Prayer Meeting Picture -->
                <div class="row mb-4">
                    <div class="col-md-6">
                        <label class="form-label"><i class="fas fa-pray me-2"></i>Prayer Meeting</label>
                        <div class="picture-slot-manager">
                            <div class="current-picture-display">
                                <div class="picture-preview-container">
                                    <img src="https://via.placeholder.com/600x400/9c27b0/ffffff?text=Prayer+Meeting" 
                                         alt="Prayer Meeting Picture" 
                                         class="img-fluid rounded shadow picture-preview" 
                                         id="prayerMeetingPicture">
                                    <div class="picture-overlay-info">
                                        <div class="picture-dimensions">600x400px</div>
                                        <div class="picture-status">Active</div>
                                    </div>
                                </div>
                            </div>
                            <div class="picture-upload-controls">
                                <div class="upload-area-enhanced" id="prayerUploadArea">
                                    <div class="upload-content">
                                        <i class="fas fa-cloud-upload-alt fa-3x text-primary mb-3"></i>
                                        <h5>Drop Prayer Meeting Picture Here</h5>
                                        <p class="text-muted">or click to browse (Recommended: 600x400px)</p>
                                        <input type="file" id="prayerMeetingUpload" accept="image/*" style="display: none;">
                                        <button class="btn btn-primary" onclick="document.getElementById('prayerMeetingUpload').click()">
                                            <i class="fas fa-folder-open me-2"></i>Choose Picture
                                        </button>
                                    </div>
                                </div>
                                <div class="picture-actions-bar">
                                    <button class="btn btn-outline-primary" onclick="previewServicePicture('prayer')">
                                        <i class="fas fa-expand me-2"></i>Full Preview
                                    </button>
                                    <button class="btn btn-outline-secondary" onclick="resetServicePicture('prayer')">
                                        <i class="fas fa-undo me-2"></i>Reset to Default
                                    </button>
                                    <button class="btn btn-outline-info" onclick="downloadServicePicture('prayer')">
                                        <i class="fas fa-download me-2"></i>Download Current
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Community Outreach Picture -->
                <div class="row mb-4">
                    <div class="col-md-6">
                        <label class="form-label"><i class="fas fa-hands-helping me-2"></i>Community Outreach</label>
                        <div class="picture-slot-manager">
                            <div class="current-picture-display">
                                <div class="picture-preview-container">
                                    <img src="https://via.placeholder.com/600x400/ff5722/ffffff?text=Community+Outreach" 
                                         alt="Community Outreach Picture" 
                                         class="img-fluid rounded shadow picture-preview" 
                                         id="communityOutreachPicture">
                                    <div class="picture-overlay-info">
                                        <div class="picture-dimensions">600x400px</div>
                                        <div class="picture-status">Active</div>
                                    </div>
                                </div>
                            </div>
                            <div class="picture-upload-controls">
                                <div class="upload-area-enhanced" id="outreachUploadArea">
                                    <div class="upload-content">
                                        <i class="fas fa-cloud-upload-alt fa-3x text-primary mb-3"></i>
                                        <h5>Drop Community Outreach Picture Here</h5>
                                        <p class="text-muted">or click to browse (Recommended: 600x400px)</p>
                                        <input type="file" id="communityOutreachUpload" accept="image/*" style="display: none;">
                                        <button class="btn btn-primary" onclick="document.getElementById('communityOutreachUpload').click()">
                                            <i class="fas fa-folder-open me-2"></i>Choose Picture
                                        </button>
                                    </div>
                                </div>
                                <div class="picture-actions-bar">
                                    <button class="btn btn-outline-primary" onclick="previewServicePicture('outreach')">
                                        <i class="fas fa-expand me-2"></i>Full Preview
                                    </button>
                                    <button class="btn btn-outline-secondary" onclick="resetServicePicture('outreach')">
                                        <i class="fas fa-undo me-2"></i>Reset to Default
                                    </button>
                                    <button class="btn btn-outline-info" onclick="downloadServicePicture('outreach')">
                                        <i class="fas fa-download me-2"></i>Download Current
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Batch Actions -->
                <div class="row mt-4">
                    <div class="col-12">
                        <div class="admin-card">
                            <h5><i class="fas fa-tools me-2"></i>Batch Actions</h5>
                            <div class="d-flex gap-3 mb-3">
                                <button class="btn btn-primary" onclick="saveAllServicePictures()">
                                    <i class="fas fa-save me-2"></i>Save All Pictures
                                </button>
                                <button class="btn btn-outline-secondary" onclick="resetAllServicePictures()">
                                    <i class="fas fa-undo me-2"></i>Reset All to Defaults
                                </button>
                                <button class="btn btn-outline-info" onclick="downloadAllServicePictures()">
                                    <i class="fas fa-download me-2"></i>Download All Pictures
                                </button>
                            </div>
                            <p class="text-muted">These actions will update all service pictures on the main services page.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- About Section -->
        <div class="content-section" id="about">
            <h2 class="mb-4">Manage About Content</h2>
            <div class="admin-card">
                <h5>Mission Statement</h5>
                <textarea class="form-control" rows="3" id="missionStatement">To glorify God by making disciples of all nations...</textarea>
            </div>
            <div class="admin-card">
                <h5>Vision Statement</h5>
                <textarea class="form-control" rows="4" id="visionStatement">We envision a transformed Zambia...</textarea>
            </div>
            <div class="admin-card">
                <h5>What We Believe</h5>
                <div id="beliefsList">
                    <div class="mb-2">
                        <input type="text" class="form-control" value="The Bible is the inspired Word of God">
                    </div>
                </div>
                <button class="btn btn-admin mt-2" onclick="addBelief()">
                    <i class="fas fa-plus me-2"></i>Add Belief
                </button>
            </div>
        </div>

        <!-- Prayer Wall Section -->
        <div class="content-section" id="prayer">
            <h2 class="mb-4">Manage Prayer Wall</h2>
            
            <!-- Pending Prayer Requests -->
            <div class="admin-card mb-4">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h5><i class="fas fa-clock text-warning me-2"></i>Pending Approval</h5>
                    <div>
                        <button class="btn btn-sm btn-outline-danger" onclick="rejectAllPendingPrayers()">
                            <i class="fas fa-times me-1"></i>Reject All
                        </button>
                    </div>
                </div>
                <div id="pendingPrayersList">
                    <div class="text-center text-muted py-4">
                        <i class="fas fa-clock fa-3x mb-3"></i>
                        <p>No prayer requests pending approval</p>
                        <small>New prayer requests will appear here for your review</small>
                    </div>
                </div>
            </div>
            
            <!-- Approved Prayer Requests -->
            <div class="admin-card">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h5><i class="fas fa-check-circle text-success me-2"></i>Approved Prayer Requests</h5>
                    <div>
                        <button class="btn btn-sm btn-outline-danger" onclick="deleteAllApprovedPrayers()">
                            <i class="fas fa-trash-alt me-1"></i>Delete All
                        </button>
                    </div>
                </div>
                <div id="prayerRequestsList">
                    <div class="text-center text-muted py-4">
                        <i class="fas fa-pray fa-3x mb-3"></i>
                        <p>No approved prayer requests yet</p>
                        <small>Approved prayer requests will appear here</small>
                    </div>
                </div>
            </div>
        </div>

        <!-- Gallery Section -->
        <div class="content-section" id="gallery">
            <h2 class="mb-4">Manage Gallery</h2>
            
            <!-- Upload Section -->
            <div class="admin-card">
                <h5><i class="fas fa-cloud-upload-alt me-2"></i>Upload Images</h5>
                <div class="row mb-3">
                    <div class="col-md-12">
                        <div class="upload-area" id="uploadArea">
                            <div class="upload-content">
                                <i class="fas fa-cloud-upload-alt fa-3x text-muted mb-3"></i>
                                <h5>Drag & Drop Images Here</h5>
                                <p class="text-muted">or click to browse files</p>
                                <input type="file" id="multipleImageUpload" accept="image/*" multiple style="display: none;">
                                <button class="btn btn-admin" onclick="document.getElementById('multipleImageUpload').click()">
                                    <i class="fas fa-folder-open me-2"></i>Browse Files
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Batch Upload Settings -->
                <div class="row mb-3" id="batchSettings" style="display: none;">
                    <div class="col-md-4">
                        <label class="form-label">Default Category</label>
                        <select class="form-control" id="batchCategory">
                            <option value="worship">Worship</option>
                            <option value="community">Community</option>
                            <option value="youth">Youth</option>
                            <option value="outreach">Outreach</option>
                        </select>
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Default Title Prefix</label>
                        <input type="text" class="form-control" id="batchTitlePrefix" placeholder="e.g., Church Event">
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Default Description</label>
                        <textarea class="form-control" id="batchDescription" rows="1" placeholder="Default description for all images"></textarea>
                    </div>
                </div>
                
                <div class="row">
                    <div class="col-md-12">
                        <button class="btn btn-success" onclick="processBatchUpload()" id="processBatchBtn" style="display: none;">
                            <i class="fas fa-check me-2"></i>Process All Images
                        </button>
                    </div>
                </div>
            </div>

            <!-- Gallery Management -->
            <div class="admin-card">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h5><i class="fas fa-images me-2"></i>Gallery Items</h5>
                    <div>
                        <button class="btn btn-sm btn-outline-primary me-2" onclick="exportGallery()">
                            <i class="fas fa-download me-1"></i>Export
                        </button>
                        <button class="btn btn-sm btn-admin" onclick="addGalleryItem()">
                            <i class="fas fa-plus me-2"></i>Add Single Image
                        </button>
                    </div>
                </div>
                
                <!-- Gallery Stats -->
                <div class="row mb-3" id="galleryStats">
                    <div class="col-md-3">
                        <div class="stat-card">
                            <h6>Total Images</h6>
                            <span class="stat-number" id="totalImages">0</span>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="stat-card">
                            <h6>Worship</h6>
                            <span class="stat-number" id="worshipCount">0</span>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="stat-card">
                            <h6>Community</h6>
                            <span class="stat-number" id="communityCount">0</span>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="stat-card">
                            <h6>Other</h6>
                            <span class="stat-number" id="otherCount">0</span>
                        </div>
                    </div>
                </div>
                
                <!-- Filter and Search -->
                <div class="row mb-3">
                    <div class="col-md-6">
                        <input type="text" class="form-control" id="gallerySearch" placeholder="Search gallery items...">
                    </div>
                    <div class="col-md-3">
                        <select class="form-control" id="galleryFilter">
                            <option value="all">All Categories</option>
                            <option value="worship">Worship</option>
                            <option value="community">Community</option>
                            <option value="youth">Youth</option>
                            <option value="outreach">Outreach</option>
                        </select>
                    </div>
                    <div class="col-md-3">
                        <select class="form-control" id="gallerySort">
                            <option value="newest">Newest First</option>
                            <option value="oldest">Oldest First</option>
                            <option value="title">By Title</option>
                            <option value="category">By Category</option>
                        </select>
                    </div>
                </div>
                
                <!-- Gallery Grid View -->
                <div class="gallery-grid-admin" id="galleryItemsList">
                    <div class="gallery-item-admin">
                        <div class="gallery-image-container">
                            <img src="https://via.placeholder.com/300x200/0056b3/ffffff?text=Worship" class="img-fluid gallery-thumb" alt="Worship Service">
                            <div class="gallery-overlay-admin">
                                <button class="btn btn-sm btn-light" onclick="previewImage(this)">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="btn btn-sm btn-primary" onclick="editGalleryItem(this)">
                                    <i class="fas fa-edit"></i>
                                </button>
                            </div>
                        </div>
                        <div class="gallery-info">
                            <input type="text" class="form-control mb-2" placeholder="Title" value="Worship Service">
                            <select class="form-control mb-2">
                                <option value="worship" selected>Worship</option>
                                <option value="community">Community</option>
                                <option value="youth">Youth</option>
                                <option value="outreach">Outreach</option>
                            </select>
                            <textarea class="form-control mb-2" placeholder="Description" rows="2">Join us in praise and worship</textarea>
                            <div class="gallery-actions">
                                <button class="btn btn-sm btn-outline-primary" onclick="duplicateGalleryItem(this)">
                                    <i class="fas fa-copy"></i> Duplicate
                                </button>
                                <button class="btn btn-sm btn-outline-danger" onclick="deleteGalleryItem(this)">
                                    <i class="fas fa-trash"></i> Delete
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Contact Section -->
        <div class="content-section" id="contact">
            <h2 class="mb-4">Manage Contact Information</h2>
            <div class="admin-card">
                <h5>Church Details</h5>
                <div class="row">
                    <div class="col-md-6">
                        <label class="form-label">Church Name</label>
                        <input type="text" class="form-control" id="churchName" value="Garden of Faith Israel Pentecostal Church">
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Address</label>
                        <input type="text" class="form-control" id="churchAddress" value="123 Church Road, Lusaka, Zambia">
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-md-6">
                        <label class="form-label">Phone</label>
                        <input type="text" class="form-control" id="churchPhone" value="+260 123 456 789">
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-control" id="churchEmail" value="info@gardenoffaith.org.zm">
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings Section -->
        <div class="content-section" id="settings">
            <h2 class="mb-4">Settings</h2>
            <div class="admin-card">
                <h5>Theme Colors</h5>
                <div class="row">
                    <div class="col-md-4">
                        <label class="form-label">Primary Color</label>
                        <input type="color" class="form-control" value="#0056b3">
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Secondary Color</label>
                        <input type="color" class="form-control" value="#007bff">
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Background Color</label>
                        <input type="color" class="form-control" value="#f8f9fa">
                    </div>
                </div>
            </div>
            <div class="admin-card">
                <h5>Site Settings</h5>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="enablePrayerWall" checked>
                    <label class="form-check-label" for="enablePrayerWall">
                        Enable Prayer Wall
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="enableGallery" checked>
                    <label class="form-check-label" for="enableGallery">
                        Enable Gallery
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="enableCountdown" checked>
                    <label class="form-check-label" for="enableCountdown">
                        Enable Countdown Timer
                    </label>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="admin.js"></script>
    <script>
        // Sidebar Navigation
        document.querySelectorAll('.sidebar-item').forEach(item => {
            item.addEventListener('click', function() {
                // Remove active class from all items
                document.querySelectorAll('.sidebar-item').forEach(i => i.classList.remove('active'));
                document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
                
                // Add active class to clicked item
                this.classList.add('active');
                const sectionId = this.dataset.section;
                document.getElementById(sectionId).classList.add('active');
            });
        });

        // Toggle Sidebar
        document.getElementById('toggleSidebar').addEventListener('click', function() {
            const sidebar = document.getElementById('sidebar');
            const content = document.getElementById('adminContent');
            
            sidebar.classList.toggle('collapsed');
            content.classList.toggle('expanded');
        });

        // Add Service
        function addService() {
            const servicesList = document.getElementById('servicesList');
            const newService = document.createElement('div');
            newService.className = 'service-item';
            newService.innerHTML = `
                <button class="delete-btn" onclick="deleteService(this)">Ã—</button>
                <div class="row">
                    <div class="col-md-3">
                        <input type="text" class="form-control" placeholder="Service Name">
                    </div>
                    <div class="col-md-2">
                        <input type="text" class="form-control" placeholder="Day">
                    </div>
                    <div class="col-md-3">
                        <input type="text" class="form-control" placeholder="Time">
                    </div>
                    <div class="col-md-4">
                        <input type="text" class="form-control" placeholder="Description">
                    </div>
                </div>
            `;
            servicesList.appendChild(newService);
        }

        // Delete Service
        function deleteService(btn) {
            btn.parentElement.remove();
        }

        // Add Belief
        function addBelief() {
            const beliefsList = document.getElementById('beliefsList');
            const newBelief = document.createElement('div');
            newBelief.className = 'mb-2';
            newBelief.innerHTML = `
                <input type="text" class="form-control" placeholder="Enter belief statement">
            `;
            beliefsList.appendChild(newBelief);
        }

        // Prayer Management Functions
        function loadPendingPrayers() {
            const pendingPrayers = window.dataSync?.getPendingPrayers() || [];
            const pendingList = document.getElementById('pendingPrayersList');
            
            if (pendingPrayers.length === 0) {
                pendingList.innerHTML = `
                    <div class="text-center text-muted py-4">
                        <i class="fas fa-clock fa-3x mb-3"></i>
                        <p>No prayer requests pending approval</p>
                        <small>New prayer requests will appear here for your review</small>
                    </div>
                `;
                return;
            }
            
            pendingList.innerHTML = pendingPrayers.map(prayer => `
                <div class="prayer-item-pending" data-prayer-id="${prayer.id}">
                    <div class="prayer-meta">
                        <div>
                            <strong>${prayer.name}</strong>
                            <span class="prayer-status status-pending ms-2">Pending</span>
                        </div>
                        <small class="text-muted">${prayer.time}</small>
                    </div>
                    <div class="prayer-content">
                        <p>${prayer.request}</p>
                    </div>
                    <div class="prayer-actions-admin">
                        <button class="btn btn-sm btn-success" onclick="approvePrayer(${prayer.id})">
                            <i class="fas fa-check me-1"></i>Approve
                        </button>
                        <button class="btn btn-sm btn-danger" onclick="rejectPrayer(${prayer.id})">
                            <i class="fas fa-times me-1"></i>Reject
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function loadApprovedPrayers() {
            const approvedPrayers = window.dataSync?.getApprovedPrayers() || [];
            const approvedList = document.getElementById('prayerRequestsList');
            
            if (approvedPrayers.length === 0) {
                approvedList.innerHTML = `
                    <div class="text-center text-muted py-4">
                        <i class="fas fa-pray fa-3x mb-3"></i>
                        <p>No approved prayer requests yet</p>
                        <small>Approved prayer requests will appear here</small>
                    </div>
                `;
                return;
            }
            
            approvedList.innerHTML = approvedPrayers.map(prayer => `
                <div class="prayer-item-approved" data-prayer-id="${prayer.id}">
                    <div class="prayer-meta">
                        <div>
                            <strong>${prayer.name}</strong>
                            <span class="prayer-status status-approved ms-2">Approved</span>
                        </div>
                        <small class="text-muted">${prayer.approvedAt || prayer.time}</small>
                    </div>
                    <div class="prayer-content">
                        <p>${prayer.request}</p>
                    </div>
                    <div class="prayer-actions-admin">
                        <button class="btn btn-sm btn-outline-danger" onclick="removeApprovedPrayer(${prayer.id})">
                            <i class="fas fa-trash me-1"></i>Remove
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function approvePrayer(prayerId) {
            if (!window.dataSync) return;
            
            const prayer = window.dataSync.approvePrayerRequest(prayerId);
            if (prayer) {
                loadPendingPrayers();
                loadApprovedPrayers();
                updateDashboardStats();
                showNotification(`Prayer request from ${prayer.name} approved and published!`, 'success');
            }
        }

        function rejectPrayer(prayerId) {
            if (!window.dataSync) return;
            
            if (confirm('Are you sure you want to reject this prayer request?')) {
                const prayer = window.dataSync.rejectPrayerRequest(prayerId);
                if (prayer) {
                    loadPendingPrayers();
                    updateDashboardStats();
                    showNotification(`Prayer request from ${prayer.name} rejected.`, 'info');
                }
            }
        }

        function removeApprovedPrayer(prayerId) {
            if (!window.dataSync) return;
            
            if (confirm('Are you sure you want to delete this approved prayer request? This will permanently remove it from the website.')) {
                const approvedPrayers = window.dataSync.getApprovedPrayers();
                const index = approvedPrayers.findIndex(p => p.id === prayerId);
                if (index !== -1) {
                    const prayer = approvedPrayers[index];
                    approvedPrayers.splice(index, 1);
                    window.dataSync.data.prayerRequests = approvedPrayers;
                    localStorage.setItem('churchAdminData', JSON.stringify(window.dataSync.data));
                    window.dataSync.updatePrayerWall();
                    loadApprovedPrayers();
                    updateDashboardStats();
                    showNotification(`Prayer request from ${prayer.name} deleted successfully.`, 'info');
                }
            }
        }

        // Bulk Delete Functions
        function deleteAllMessages() {
            if (!window.dataSync) return;
            
            const messages = window.dataSync.data.messages || [];
            if (messages.length === 0) {
                showNotification('No messages to delete.', 'info');
                return;
            }
            
            if (confirm(`Are you sure you want to delete all ${messages.length} messages? This action cannot be undone.`)) {
                window.dataSync.data.messages = [];
                localStorage.setItem('churchAdminData', JSON.stringify(window.dataSync.data));
                
                // Clear messages list
                document.getElementById('messagesList').innerHTML = `
                    <div class="text-center text-muted py-4">
                        <i class="fas fa-inbox fa-3x mb-3"></i>
                        <p>No messages received yet</p>
                        <small>Messages from the contact form will appear here</small>
                    </div>
                `;
                
                updateDashboardStats();
                updateMessageCount();
                showNotification(`Successfully deleted ${messages.length} messages.`, 'success');
            }
        }

        function rejectAllPendingPrayers() {
            if (!window.dataSync) return;
            
            const pendingPrayers = window.dataSync.getPendingPrayers();
            if (pendingPrayers.length === 0) {
                showNotification('No pending prayer requests to reject.', 'info');
                return;
            }
            
            if (confirm(`Are you sure you want to reject all ${pendingPrayers.length} pending prayer requests? This action cannot be undone.`)) {
                window.dataSync.data.pendingPrayers = [];
                localStorage.setItem('churchAdminData', JSON.stringify(window.dataSync.data));
                
                loadPendingPrayers();
                updateDashboardStats();
                showNotification(`Successfully rejected ${pendingPrayers.length} prayer requests.`, 'success');
            }
        }

        function deleteAllApprovedPrayers() {
            if (!window.dataSync) return;
            
            const approvedPrayers = window.dataSync.getApprovedPrayers();
            if (approvedPrayers.length === 0) {
                showNotification('No approved prayer requests to delete.', 'info');
                return;
            }
            
            if (confirm(`Are you sure you want to delete all ${approvedPrayers.length} approved prayer requests? This will permanently remove them from the website and cannot be undone.`)) {
                window.dataSync.data.prayerRequests = [];
                localStorage.setItem('churchAdminData', JSON.stringify(window.dataSync.data));
                window.dataSync.updatePrayerWall();
                
                loadApprovedPrayers();
                updateDashboardStats();
                showNotification(`Successfully deleted ${approvedPrayers.length} approved prayer requests from the website.`, 'success');
            }
        }

        function exportMessages() {
            const messages = window.dataSync?.data.messages || [];
            if (messages.length === 0) {
                showNotification('No messages to export.', 'info');
                return;
            }
            
            const dataStr = JSON.stringify(messages, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `messages-export-${new Date().toISOString().split('T')[0]}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            showNotification('Messages exported successfully!', 'success');
        }

        // Enhanced Picture Slot Management
        let pictureSlotData = null;

        function initializePictureSlot() {
            const uploadArea = document.getElementById('pictureUploadArea');
            const fileInput = document.getElementById('themePictureUpload');
            
            if (uploadArea && fileInput) {
                // Drag and drop events
                uploadArea.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    uploadArea.classList.add('dragover');
                });
                
                uploadArea.addEventListener('dragleave', function(e) {
                    e.preventDefault();
                    uploadArea.classList.remove('dragover');
                });
                
                uploadArea.addEventListener('drop', function(e) {
                    e.preventDefault();
                    uploadArea.classList.remove('dragover');
                    handlePictureFile(e.dataTransfer.files[0]);
                });
                
                // File input change
                fileInput.addEventListener('change', function(e) {
                    handlePictureFile(e.target.files[0]);
                });
            }
        }

        function handlePictureFile(file) {
            if (!file) return;
            
            // Validate file
            if (!file.type.startsWith('image/')) {
                showNotification('Please select an image file.', 'error');
                return;
            }
            
            if (file.size > 5 * 1024 * 1024) { // 5MB limit
                showNotification('File size must be less than 5MB.', 'error');
                return;
            }
            
            // Read and display the image
            const reader = new FileReader();
            reader.onload = function(e) {
                pictureSlotData = e.target.result;
                updatePicturePreview(pictureSlotData);
                showNotification('Picture uploaded successfully!', 'success');
            };
            reader.readAsDataURL(file);
        }

        function updatePicturePreview(imageSrc) {
            const preview = document.getElementById('currentThemePicture');
            if (preview) {
                preview.src = imageSrc;
                
                // Update overlay info
                const dimensions = document.querySelector('.picture-dimensions');
                if (dimensions) {
                    dimensions.textContent = 'Custom upload';
                }
                
                const status = document.querySelector('.picture-status');
                if (status) {
                    status.textContent = 'Updated';
                    status.style.color = '#ffc107';
                }
            }
        }

        function previewPictureInModal() {
            const preview = document.getElementById('currentThemePicture');
            if (preview) {
                const modal = document.createElement('div');
                modal.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    background: rgba(0, 0, 0, 0.9);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    z-index: 10000;
                    cursor: pointer;
                `;
                
                modal.innerHTML = `
                    <img src="${preview.src}" style="max-width: 90%; max-height: 90%; object-fit: contain; border-radius: 10px;">
                    <div style="position: absolute; top: 20px; right: 20px;">
                        <button style="background: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">
                            <i class="fas fa-times"></i> Close
                        </button>
                    </div>
                `;
                
                modal.onclick = () => document.body.removeChild(modal);
                document.body.appendChild(modal);
            }
        }

        function resetPicture() {
            if (confirm('Are you sure you want to reset to the default picture?')) {
                const defaultSrc = 'https://via.placeholder.com/600x400/0056b3/ffffff?text=BE+STRONG%3B+FEAR+NOT%21+2026';
                pictureSlotData = null;
                updatePicturePreview(defaultSrc);
                
                const status = document.querySelector('.picture-status');
                if (status) {
                    status.textContent = 'Default';
                    status.style.color = '#28a745';
                }
                
                showNotification('Picture reset to default.', 'info');
            }
        }

        function downloadCurrentPicture() {
            const preview = document.getElementById('currentThemePicture');
            if (preview) {
                const link = document.createElement('a');
                link.href = preview.src;
                link.download = `theme-picture-${new Date().toISOString().split('T')[0]}.jpg`;
                link.click();
                showNotification('Picture download started.', 'success');
            }
        }

        // Update the existing theme management functions
        function previewThemeImage() {
            const fileInput = document.getElementById('themePictureUpload');
            if (fileInput.files && fileInput.files[0]) {
                handlePictureFile(fileInput.files[0]);
            }
        }

        function saveTheme() {
            const themeData = {
                title: document.getElementById('themeTitle').value,
                year: document.getElementById('themeYear').value,
                tagline: document.getElementById('themeTagline').value,
                verse: document.getElementById('themeVerse').value,
                description: document.getElementById('themeDescription').value,
                picture: pictureSlotData || document.getElementById('currentThemePicture').src,
                highlights: []
            };

            // Collect highlights
            document.querySelectorAll('#themeHighlights input').forEach(input => {
                if (input.value.trim()) {
                    themeData.highlights.push(input.value.trim());
                }
            });

            // Save to localStorage
            if (!window.dataSync) {
                window.dataSync = { data: {} };
            }
            if (!window.dataSync.data.theme) {
                window.dataSync.data.theme = {};
            }
            
            window.dataSync.data.theme = themeData;
            localStorage.setItem('churchAdminData', JSON.stringify(window.dataSync.data));
            
            // Update website
            updateWebsiteTheme(themeData);
            
            showNotification('Theme saved successfully!', 'success');
        }

        function updateWebsiteTheme(themeData) {
            // Update theme section on main website
            const themeSection = document.querySelector('.theme-title');
            const themeVerse = document.querySelector('.theme-verse');
            const themeDescription = document.querySelector('.theme-description');
            const themePicture = document.querySelector('.theme-picture');
            const themeYear = document.querySelector('.theme-year');
            const themeTagline = document.querySelector('.theme-tagline');
            
            if (themeSection) themeSection.textContent = `"${themeData.title}"`;
            if (themeVerse) themeVerse.innerHTML = `<em>${themeData.verse.split(' - ')[0]}</em><strong> - ${themeData.verse.split(' - ')[1]}</strong>`;
            if (themeDescription) themeDescription.textContent = themeData.description;
            if (themePicture) themePicture.src = themeData.picture;
            if (themeYear) themeYear.textContent = themeData.year;
            if (themeTagline) themeTagline.textContent = themeData.tagline;
            
            // Update highlights
            const highlightsContainer = document.querySelector('.theme-highlights');
            if (highlightsContainer && themeData.highlights) {
                highlightsContainer.innerHTML = themeData.highlights.map((highlight, index) => {
                    const icons = ['fa-seedling', 'fa-hands-helping', 'fa-wheat-awn', 'fa-heart', 'fa-dove'];
                    const icon = icons[index % icons.length];
                    return `
                        <div class="highlight-item mb-3">
                            <i class="fas ${icon} text-primary me-3"></i>
                            <span>${highlight}</span>
                        </div>
                    `;
                }).join('');
            }
        }

        function previewTheme() {
            saveTheme();
            window.open('index.html#theme', '_blank');
        }

        // Service Picture Management Functions
        let servicePictures = {
            sunday: 'https://via.placeholder.com/600x400/0056b3/ffffff?text=Sunday+Service',
            bible: 'https://via.placeholder.com/600x400/007bff/ffffff?text=Bible+Study',
            women: 'https://via.placeholder.com/600x400/e91e63/ffffff?text=Women%27s+Fellowship',
            discipleship: 'https://via.placeholder.com/600x400/4caf50/ffffff?text=Discipleship+Class',
            youth: 'youth.jpeg',
            praise: 'https://via.placeholder.com/600x400/ff9800/ffffff?text=Praise+Rehearsals',
            prayer: 'https://via.placeholder.com/600x400/9c27b0/ffffff?text=Prayer+Meeting',
            outreach: 'https://via.placeholder.com/600x400/ff5722/ffffff?text=Community+Outreach'
        };

        function initializeServicePictureUploads() {
            const uploadAreas = [
                'sundayUploadArea', 'bibleUploadArea', 'womenUploadArea', 
                'discipleshipUploadArea', 'youthUploadArea', 'praiseUploadArea', 'prayerUploadArea', 'outreachUploadArea'
            ];

            uploadAreas.forEach(areaId => {
                const area = document.getElementById(areaId);
                const serviceName = areaId.replace('UploadArea', '');
                const fileInput = document.getElementById(serviceName + 'Upload');

                if (area && fileInput) {
                    // Drag and drop events
                    area.addEventListener('dragover', function(e) {
                        e.preventDefault();
                        area.classList.add('dragover');
                    });
                    
                    area.addEventListener('dragleave', function(e) {
                        e.preventDefault();
                        area.classList.remove('dragover');
                    });
                    
                    area.addEventListener('drop', function(e) {
                        e.preventDefault();
                        area.classList.remove('dragover');
                        handleServicePictureUpload(e.dataTransfer.files[0], serviceName);
                    });
                    
                    // File input change
                    fileInput.addEventListener('change', function(e) {
                        handleServicePictureUpload(e.target.files[0], serviceName);
                    });
                }
            });
        }

        function handleServicePictureUpload(file, serviceName) {
            if (!file) return;
            
            // Validate file
            if (!file.type.startsWith('image/')) {
                showNotification('Please select an image file.', 'error');
                return;
            }
            
            if (file.size > 5 * 1024 * 1024) { // 5MB limit
                showNotification('File size must be less than 5MB.', 'error');
                return;
            }
            
            // Read and display image
            const reader = new FileReader();
            reader.onload = function(e) {
                servicePictures[serviceName] = e.target.result;
                updateServicePictureDisplay(serviceName, e.target.result);
                showNotification(`${serviceName} picture uploaded successfully!`, 'success');
            };
            reader.readAsDataURL(file);
        }

        function updateServicePictureDisplay(serviceName, imageSrc) {
            const preview = document.getElementById(serviceName + 'Picture');
            const status = document.querySelector(`#${serviceName}Picture`).closest('.picture-slot-manager').querySelector('.picture-status');
            const dimensions = document.querySelector(`#${serviceName}Picture`).closest('.picture-slot-manager').querySelector('.picture-dimensions');
            
            if (preview) {
                preview.src = imageSrc;
                status.textContent = 'Updated';
                status.style.color = '#ffc107';
                
                if (dimensions) {
                    dimensions.textContent = 'Custom upload';
                }
            }
        }

        function previewServicePicture(serviceName) {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.9);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
                cursor: pointer;
            `;
            
            modal.innerHTML = `
                <img src="${servicePictures[serviceName]}" style="max-width: 90%; max-height: 90%; object-fit: contain; border-radius: 10px;">
                <div style="position: absolute; top: 20px; right: 20px;">
                    <button style="background: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">
                        <i class="fas fa-times"></i> Close
                    </button>
                </div>
            `;
            
            modal.onclick = () => document.body.removeChild(modal);
            document.body.appendChild(modal);
        }

        function resetServicePicture(serviceName) {
            if (confirm(`Reset ${serviceName} picture to default?`)) {
                const defaults = {
                    sunday: 'https://via.placeholder.com/600x400/0056b3/ffffff?text=Sunday+Service',
                    bible: 'https://via.placeholder.com/600x400/007bff/ffffff?text=Bible+Study',
                    women: 'https://via.placeholder.com/600x400/e91e63/ffffff?text=Women%27s+Fellowship',
                    discipleship: 'https://via.placeholder.com/600x400/4caf50/ffffff?text=Discipleship+Class',
                    youth: 'https://via.placeholder.com/600x400/ff9800/ffffff?text=Youth+Fellowship',
                    praise: 'https://via.placeholder.com/600x400/ff9800/ffffff?text=Praise+Rehearsals',
                    prayer: 'https://via.placeholder.com/600x400/9c27b0/ffffff?text=Prayer+Meeting',
                    outreach: 'https://via.placeholder.com/600x400/ff5722/ffffff?text=Community+Outreach'
                };
                
                servicePictures[serviceName] = defaults[serviceName];
                updateServicePictureDisplay(serviceName, defaults[serviceName]);
                showNotification(`${serviceName} picture reset to default.`, 'info');
            }
        }

        function downloadServicePicture(serviceName) {
            const link = document.createElement('a');
            link.href = servicePictures[serviceName];
            link.download = `${serviceName}-picture-${new Date().toISOString().split('T')[0]}.jpg`;
            link.click();
            showNotification(`${serviceName} picture download started.`, 'success');
        }

        function saveAllServicePictures() {
            // Save to localStorage
            localStorage.setItem('churchServicePictures', JSON.stringify(servicePictures));
            
            // Update services.html
            showNotification('All service pictures saved successfully!', 'success');
        }

        function resetAllServicePictures() {
            if (confirm('Reset all service pictures to defaults?')) {
                const defaults = {
                    sunday: 'https://via.placeholder.com/600x400/0056b3/ffffff?text=Sunday+Service',
                    bible: 'https://via.placeholder.com/600x400/007bff/ffffff?text=Bible+Study',
                    women: 'https://via.placeholder.com/600x400/e91e63/ffffff?text=Women%27s+Fellowship',
                    discipleship: 'https://via.placeholder.com/600x400/4caf50/ffffff?text=Discipleship+Class',
                    youth: 'https://via.placeholder.com/600x400/ff9800/ffffff?text=Youth+Fellowship',
                    praise: 'https://via.placeholder.com/600x400/ff9800/ffffff?text=Praise+Rehearsals',
                    prayer: 'https://via.placeholder.com/600x400/9c27b0/ffffff?text=Prayer+Meeting',
                    outreach: 'https://via.placeholder.com/600x400/ff5722/ffffff?text=Community+Outreach'
                };
                
                Object.keys(defaults).forEach(service => {
                    servicePictures[service] = defaults[service];
                    updateServicePictureDisplay(service, defaults[service]);
                });
                
                showNotification('All service pictures reset to defaults.', 'info');
            }
        }

        function downloadAllServicePictures() {
            Object.keys(servicePictures).forEach(serviceName => {
                const link = document.createElement('a');
                link.href = servicePictures[serviceName];
                link.download = `${serviceName}-picture-${new Date().toISOString().split('T')[0]}.jpg`;
                link.click();
            });
            showNotification('All service pictures download started.', 'success');
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            initializeServicePictureUploads();
            
            // Load saved pictures from localStorage
            const saved = localStorage.getItem('churchServicePictures');
            if (saved) {
                Object.assign(servicePictures, JSON.parse(saved));
                Object.keys(servicePictures).forEach(service => {
                    updateServicePictureDisplay(service, servicePictures[service]);
                });
            }
        });

        // Gallery Management Functions
        let uploadedFiles = [];

        // Initialize drag and drop
        document.addEventListener('DOMContentLoaded', function() {
            const uploadArea = document.getElementById('uploadArea');
            const multipleImageUpload = document.getElementById('multipleImageUpload');
            
            if (uploadArea && multipleImageUpload) {
                // Drag and drop events
                uploadArea.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    uploadArea.classList.add('dragover');
                });
                
                uploadArea.addEventListener('dragleave', function(e) {
                    e.preventDefault();
                    uploadArea.classList.remove('dragover');
                });
                
                uploadArea.addEventListener('drop', function(e) {
                    e.preventDefault();
                    uploadArea.classList.remove('dragover');
                    handleFiles(e.dataTransfer.files);
                });
                
                // File input change
                multipleImageUpload.addEventListener('change', function(e) {
                    handleFiles(e.target.files);
                });
                
                // Gallery search and filter
                const gallerySearch = document.getElementById('gallerySearch');
                const galleryFilter = document.getElementById('galleryFilter');
                const gallerySort = document.getElementById('gallerySort');
                
                if (gallerySearch) gallerySearch.addEventListener('input', filterGallery);
                if (galleryFilter) galleryFilter.addEventListener('change', filterGallery);
                if (gallerySort) gallerySort.addEventListener('change', sortGallery);
            }
            
            updateGalleryStats();
        });

        function handleFiles(files) {
            uploadedFiles = Array.from(files);
            displayBatchPreview();
        }

        function displayBatchPreview() {
            const batchSettings = document.getElementById('batchSettings');
            const processBatchBtn = document.getElementById('processBatchBtn');
            
            if (uploadedFiles.length > 0) {
                batchSettings.style.display = 'block';
                processBatchBtn.style.display = 'block';
                
                // Create preview area
                const previewHtml = `
                    <div class="batch-preview">
                        ${uploadedFiles.map((file, index) => `
                            <div class="batch-preview-item">
                                <img src="${URL.createObjectURL(file)}" alt="${file.name}">
                                <button class="remove-btn" onclick="removeFromBatch(${index})">Ã—</button>
                            </div>
                        `).join('')}
                    </div>
                `;
                
                // Add preview after upload area
                const uploadArea = document.getElementById('uploadArea');
                const existingPreview = uploadArea.parentElement.querySelector('.batch-preview');
                if (existingPreview) existingPreview.remove();
                uploadArea.insertAdjacentHTML('afterend', previewHtml);
            } else {
                batchSettings.style.display = 'none';
                processBatchBtn.style.display = 'none';
            }
        }

        function removeFromBatch(index) {
            uploadedFiles.splice(index, 1);
            displayBatchPreview();
        }

        function processBatchUpload() {
            if (uploadedFiles.length === 0) return;
            
            const category = document.getElementById('batchCategory').value;
            const titlePrefix = document.getElementById('batchTitlePrefix').value;
            const description = document.getElementById('batchDescription').value;
            
            let processedCount = 0;
            
            uploadedFiles.forEach((file, index) => {
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    const galleryItemsList = document.getElementById('galleryItemsList');
                    const newGalleryItem = document.createElement('div');
                    newGalleryItem.className = 'gallery-item-admin';
                    
                    const title = titlePrefix ? `${titlePrefix} ${index + 1}` : file.name.split('.')[0];
                    
                    newGalleryItem.innerHTML = `
                        <div class="gallery-image-container">
                            <img src="${e.target.result}" class="img-fluid gallery-thumb" alt="${title}">
                            <div class="gallery-overlay-admin">
                                <button class="btn btn-sm btn-light" onclick="previewImage(this)">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="btn btn-sm btn-primary" onclick="editGalleryItem(this)">
                                    <i class="fas fa-edit"></i>
                                </button>
                            </div>
                        </div>
                        <div class="gallery-info">
                            <input type="text" class="form-control mb-2" placeholder="Title" value="${title}">
                            <select class="form-control mb-2">
                                <option value="worship" ${category === 'worship' ? 'selected' : ''}>Worship</option>
                                <option value="community" ${category === 'community' ? 'selected' : ''}>Community</option>
                                <option value="youth" ${category === 'youth' ? 'selected' : ''}>Youth</option>
                                <option value="outreach" ${category === 'outreach' ? 'selected' : ''}>Outreach</option>
                            </select>
                            <textarea class="form-control mb-2" placeholder="Description" rows="2">${description}</textarea>
                            <div class="gallery-actions">
                                <button class="btn btn-sm btn-outline-primary" onclick="duplicateGalleryItem(this)">
                                    <i class="fas fa-copy"></i> Duplicate
                                </button>
                                <button class="btn btn-sm btn-outline-danger" onclick="deleteGalleryItem(this)">
                                    <i class="fas fa-trash"></i> Delete
                                </button>
                            </div>
                        </div>
                    `;
                    
                    galleryItemsList.insertBefore(newGalleryItem, galleryItemsList.firstChild);
                    
                    processedCount++;
                    if (processedCount === uploadedFiles.length) {
                        // All files processed
                        uploadedFiles = [];
                        displayBatchPreview();
                        document.getElementById('multipleImageUpload').value = '';
                        updateGalleryStats();
                        
                        showNotification(`Successfully uploaded ${processedCount} images!`, 'success');
                    }
                };
                
                reader.readAsDataURL(file);
            });
        }

        function addGalleryItem() {
            const galleryItemsList = document.getElementById('galleryItemsList');
            const newGalleryItem = document.createElement('div');
            newGalleryItem.className = 'gallery-item-admin';
            newGalleryItem.innerHTML = `
                <div class="gallery-image-container">
                    <img src="https://via.placeholder.com/300x200/007bff/ffffff?text=New+Image" class="img-fluid gallery-thumb" alt="New Image">
                    <div class="gallery-overlay-admin">
                        <button class="btn btn-sm btn-light" onclick="previewImage(this)">
                            <i class="fas fa-eye"></i>
                        </button>
                        <button class="btn btn-sm btn-primary" onclick="editGalleryItem(this)">
                            <i class="fas fa-edit"></i>
                        </button>
                    </div>
                </div>
                <div class="gallery-info">
                    <input type="text" class="form-control mb-2" placeholder="Title">
                    <select class="form-control mb-2">
                        <option value="worship">Worship</option>
                        <option value="community">Community</option>
                        <option value="youth">Youth</option>
                        <option value="outreach">Outreach</option>
                    </select>
                    <textarea class="form-control mb-2" placeholder="Description" rows="2"></textarea>
                    <div class="gallery-actions">
                        <button class="btn btn-sm btn-outline-primary" onclick="duplicateGalleryItem(this)">
                            <i class="fas fa-copy"></i> Duplicate
                        </button>
                        <button class="btn btn-sm btn-outline-danger" onclick="deleteGalleryItem(this)">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    </div>
                </div>
            `;
            galleryItemsList.insertBefore(newGalleryItem, galleryItemsList.firstChild);
            updateGalleryStats();
        }

        function deleteGalleryItem(btn) {
            if (confirm('Are you sure you want to delete this gallery item?')) {
                btn.closest('.gallery-item-admin').remove();
                updateGalleryStats();
            }
        }

        function duplicateGalleryItem(btn) {
            const originalItem = btn.closest('.gallery-item-admin');
            const newItem = originalItem.cloneNode(true);
            
            // Clear input values in the duplicated item
            newItem.querySelectorAll('input').forEach(input => {
                if (input.type === 'text') input.value = '';
            });
            newItem.querySelectorAll('textarea').forEach(textarea => {
                textarea.value = '';
            });
            
            originalItem.parentNode.insertBefore(newItem, originalItem.nextSibling);
            updateGalleryStats();
        }

        function editGalleryItem(btn) {
            const item = btn.closest('.gallery-item-admin');
            const titleInput = item.querySelector('input[type="text"]');
            const categorySelect = item.querySelector('select');
            const descriptionTextarea = item.querySelector('textarea');
            
            // Make fields editable (they're already editable, but we can add visual feedback)
            item.style.border = '2px solid var(--admin-primary)';
            setTimeout(() => {
                item.style.border = '';
            }, 2000);
        }

        function previewImage(btn) {
            const img = btn.closest('.gallery-image-container').querySelector('img');
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.8);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
                cursor: pointer;
            `;
            
            modal.innerHTML = `
                <img src="${img.src}" style="max-width: 90%; max-height: 90%; object-fit: contain; border-radius: 10px;">
            `;
            
            modal.onclick = () => document.body.removeChild(modal);
            document.body.appendChild(modal);
        }

        function filterGallery() {
            const searchTerm = document.getElementById('gallerySearch').value.toLowerCase();
            const filterType = document.getElementById('galleryFilter').value;
            const items = document.querySelectorAll('.gallery-item-admin');
            
            items.forEach(item => {
                const title = item.querySelector('input[type="text"]').value.toLowerCase();
                const description = item.querySelector('textarea').value.toLowerCase();
                const category = item.querySelector('select').value;
                
                const matchesSearch = title.includes(searchTerm) || description.includes(searchTerm);
                const matchesFilter = filterType === 'all' || category === filterType;
                
                item.style.display = matchesSearch && matchesFilter ? 'block' : 'none';
            });
        }

        function sortGallery() {
            const sortBy = document.getElementById('gallerySort').value;
            const container = document.getElementById('galleryItemsList');
            const items = Array.from(container.querySelectorAll('.gallery-item-admin'));
            
            items.sort((a, b) => {
                const aTitle = a.querySelector('input[type="text"]').value;
                const bTitle = b.querySelector('input[type="text"]').value;
                const aCategory = a.querySelector('select').value;
                const bCategory = b.querySelector('select').value;
                
                switch (sortBy) {
                    case 'title':
                        return aTitle.localeCompare(bTitle);
                    case 'category':
                        return aCategory.localeCompare(bCategory);
                    case 'newest':
                        return container.contains(b) ? 1 : -1;
                    case 'oldest':
                        return container.contains(a) ? 1 : -1;
                    default:
                        return 0;
                }
            });
            
            items.forEach(item => container.appendChild(item));
        }

        function updateGalleryStats() {
            const items = document.querySelectorAll('.gallery-item-admin');
            const totalImages = items.length;
            
            let worshipCount = 0;
            let communityCount = 0;
            let youthCount = 0;
            let outreachCount = 0;
            
            items.forEach(item => {
                const category = item.querySelector('select').value;
                switch (category) {
                    case 'worship': worshipCount++; break;
                    case 'community': communityCount++; break;
                    case 'youth': youthCount++; break;
                    case 'outreach': outreachCount++; break;
                }
            });
            
            document.getElementById('totalImages').textContent = totalImages;
            document.getElementById('worshipCount').textContent = worshipCount;
            document.getElementById('communityCount').textContent = communityCount;
            document.getElementById('otherCount').textContent = youthCount + outreachCount;
        }

        function exportGallery() {
            const items = document.querySelectorAll('.gallery-item-admin');
            const galleryData = [];
            
            items.forEach(item => {
                const img = item.querySelector('img');
                const title = item.querySelector('input[type="text"]').value;
                const category = item.querySelector('select').value;
                const description = item.querySelector('textarea').value;
                
                galleryData.push({
                    title,
                    category,
                    description,
                    image: img.src
                });
            });
            
            const dataStr = JSON.stringify(galleryData, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `gallery-export-${new Date().toISOString().split('T')[0]}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            showNotification('Gallery exported successfully!', 'success');
        }

        // Logout Function
        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                sessionStorage.removeItem('adminAuthenticated');
                sessionStorage.removeItem('loginTime');
                window.location.href = 'login.html';
            }
        }

        // Delete Gallery Item
        function deleteGalleryItem(btn) {
            btn.closest('.gallery-item-admin').remove();
        }

        // Save All Changes
        function saveAllChanges() {
            // Collect all data and save to localStorage
            const data = {
                services: [],
                mission: document.getElementById('missionStatement').value,
                vision: document.getElementById('visionStatement').value,
                beliefs: [],
                contact: {
                    name: document.getElementById('churchName').value,
                    address: document.getElementById('churchAddress').value,
                    phone: document.getElementById('churchPhone').value,
                    email: document.getElementById('churchEmail').value
                },
                gallery: [],
                messages: [],
                prayerRequests: [],
                settings: {
                    primaryColor: document.getElementById('primaryColor').value,
                    secondaryColor: document.getElementById('secondaryColor').value,
                    enableCountdown: document.getElementById('enableCountdown').checked,
                    enablePrayerWall: document.getElementById('enablePrayerWall').checked,
                    enableGallery: document.getElementById('enableGallery').checked
                }
            };

            // Collect services
            document.querySelectorAll('.service-item').forEach(item => {
                const inputs = item.querySelectorAll('input');
                data.services.push({
                    name: inputs[0].value,
                    day: inputs[1].value,
                    time: inputs[2].value,
                    description: inputs[3].value
                });
            });

            // Collect beliefs
            document.querySelectorAll('#beliefsList input').forEach(input => {
                if (input.value) data.beliefs.push(input.value);
            });

            // Collect gallery items
            document.querySelectorAll('.gallery-item-admin').forEach(item => {
                const img = item.querySelector('img');
                const titleInput = item.querySelector('input[type="text"]');
                const categorySelect = item.querySelector('select');
                const descriptionTextarea = item.querySelector('textarea');
                
                data.gallery.push({
                    title: titleInput.value,
                    category: categorySelect.value,
                    description: descriptionTextarea.value,
                    image: img.src
                });
            });

            // Collect messages
            document.querySelectorAll('.message-item').forEach(item => {
                const name = item.querySelector('.message-name').textContent;
                const email = item.querySelector('.message-contact span').textContent;
                const phone = item.querySelectorAll('.message-contact span')[1]?.textContent || '';
                const type = item.querySelector('.badge').textContent;
                const content = item.querySelector('.message-content p').textContent;
                const unread = item.classList.contains('unread');
                
                data.messages.push({
                    name,
                    email,
                    phone,
                    type,
                    message: content,
                    unread
                });
            });

            // Collect prayer requests
            document.querySelectorAll('.prayer-item-admin').forEach(item => {
                const name = item.querySelector('strong')?.textContent || 'Anonymous';
                const request = item.querySelector('p')?.textContent || '';
                const time = item.querySelector('small')?.textContent || 'Just now';
                
                data.prayerRequests.push({
                    name,
                    request,
                    time,
                    praying: Math.floor(Math.random() * 10) + 1
                });
            });

            // Save to localStorage
            localStorage.setItem('churchAdminData', JSON.stringify(data));
            
            // Trigger sync with main website
            localStorage.setItem('syncTrigger', Date.now().toString());
            
            // Show success message
            showNotification('All changes saved successfully! The main site will be updated.', 'success');
            
            // Update dashboard stats
            updateDashboardStats();
            updateMessageCount();
        }

        // Preview Site
        function previewSite() {
            window.open('index.html', '_blank');
        }

        // Load saved data on page load
        window.addEventListener('load', function() {
            const savedData = localStorage.getItem('churchData');
            if (savedData) {
                const data = JSON.parse(savedData);
                console.log('Loading saved data:', data);
            }
            
            // Initialize dashboard
            initializeDashboard();
            setupRealTimeMonitoring();
        });

        // Initialize Dashboard
        function initializeDashboard() {
            updateDashboardStats();
            updateTodayServices();
            updateRecentPrayers();
            updateActivityLog();
            
            // Set current date
            const today = new Date().toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
            document.getElementById('currentDate').textContent = today;
        }

        // Update Dashboard Statistics
        function updateDashboardStats() {
            const services = document.querySelectorAll('.service-item').length || 6;
            const prayers = document.querySelectorAll('.prayer-item-admin').length || 0;
            const gallery = document.querySelectorAll('.gallery-item-admin').length || 1;
            const messages = document.querySelectorAll('.message-item').length || 0;
            const unreadMessages = document.querySelectorAll('.message-item.unread').length || 0;
            
            document.getElementById('activeServicesCount').textContent = services;
            document.getElementById('prayerCount').textContent = prayers;
            document.getElementById('galleryCount').textContent = gallery;
            document.getElementById('messageStat').textContent = messages;
            document.getElementById('unreadMessagesCount').textContent = unreadMessages;
            document.getElementById('totalContactsCount').textContent = messages; // Messages represent contacts
            
            // Simulate active users (in real app, this would come from server)
            document.getElementById('activeUsersCount').textContent = 0;
            
            // Count today's services
            const today = new Date().getDay();
            const todayServices = getTodayServices(today);
            document.getElementById('todayServicesCount').textContent = todayServices.length;
        }

        // Get Today's Services
        function getTodayServices(day) {
            const dayNames = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
            const todayName = dayNames[day];
            
            const services = [];
            document.querySelectorAll('.service-item').forEach(item => {
                const inputs = item.querySelectorAll('input');
                const serviceDay = inputs[1]?.value.toLowerCase();
                if (serviceDay && serviceDay.includes(todayName.toLowerCase())) {
                    services.push({
                        name: inputs[0]?.value || 'Service',
                        time: inputs[2]?.value || 'Time TBD'
                    });
                }
            });
            
            return services;
        }

        // Update Today's Services Display
        function updateTodayServices() {
            const today = new Date().getDay();
            const todayServices = getTodayServices(today);
            const container = document.getElementById('todayServices');
            
            if (todayServices.length === 0) {
                container.innerHTML = '<p class="text-muted">No services scheduled for today</p>';
            } else {
                container.innerHTML = todayServices.map(service => `
                    <div class="alert alert-info">
                        <i class="fas fa-clock me-2"></i>
                        <strong>${service.name}</strong> - ${service.time}
                        <button class="btn btn-sm btn-outline-primary float-end" onclick="switchToSection('services')">Manage</button>
                    </div>
                `).join('');
            }
        }

        // Update Recent Prayers
        function updateRecentPrayers() {
            const container = document.getElementById('recentPrayers');
            const prayers = document.querySelectorAll('.prayer-item-admin');
            
            if (prayers.length === 0) {
                container.innerHTML = '<p class="text-muted">No prayer requests yet</p>';
            } else {
                const recentPrayers = Array.from(prayers).slice(0, 3);
                container.innerHTML = recentPrayers.map((prayer, index) => {
                    const nameEl = prayer.querySelector('strong');
                    const textEl = prayer.querySelector('p');
                    const timeEl = prayer.querySelector('small');
                    
                    return `
                        <div class="border-bottom pb-2 mb-2">
                            <div class="d-flex justify-content-between">
                                <strong>${nameEl?.textContent || 'Anonymous'}</strong>
                                <small class="text-muted">${index === 0 ? 'Just now' : index + ' mins ago'}</small>
                            </div>
                            <p class="mb-1">${textEl?.textContent || 'Prayer request'}</p>
                            <small><span class="badge bg-primary">${Math.floor(Math.random() * 10) + 1} people praying</span></small>
                        </div>
                    `;
                }).join('');
            }
        }

        // Update Activity Log
        function updateActivityLog() {
            const activities = [
                '<i class="fas fa-clock text-muted me-2"></i> New prayer request added 2 minutes ago',
                '<i class="fas fa-edit text-muted me-2"></i> Service times updated yesterday',
                '<i class="fas fa-image text-muted me-2"></i> Gallery updated 3 days ago',
                '<i class="fas fa-user text-muted me-2"></i> Admin logged in just now'
            ];
            
            document.getElementById('activityLog').innerHTML = activities.map(activity => 
                `<li class="mb-2">${activity}</li>`
            ).join('');
        }

        // Setup Real-time Monitoring
        function setupRealTimeMonitoring() {
            // Listen for new prayer requests
            window.addEventListener('storage', function(e) {
                if (e.key === 'newPrayerRequest') {
                    const prayerData = JSON.parse(e.newValue);
                    showNotification(prayerData);
                    updateDashboardStats();
                    // Load pending prayers if on prayer tab
                    if (document.getElementById('prayer').classList.contains('active')) {
                        loadPendingPrayers();
                    }
                }
                
                // Listen for new messages
                if (e.key === 'newMessage') {
                    const messageData = JSON.parse(e.newValue);
                    addMessage(messageData);
                    updateDashboardStats();
                }
            });
            
            // Check for updates every 30 seconds
            setInterval(() => {
                checkForUpdates();
                // Refresh prayer sections if on prayer tab
                if (document.getElementById('prayer').classList.contains('active')) {
                    loadPendingPrayers();
                    loadApprovedPrayers();
                }
            }, 30000);
        }

        // Show Notification for New Prayer Request
        function showNotification(prayerData) {
            const notificationPanel = document.getElementById('notificationPanel');
            const notificationText = document.getElementById('notificationText');
            const notificationBadge = document.getElementById('notificationBadge');
            
            notificationText.textContent = `${prayerData.name || 'Anonymous'} added a new prayer request: "${prayerData.request.substring(0, 50)}..."`;
            notificationPanel.style.display = 'block';
            
            // Update badge
            const currentCount = parseInt(notificationBadge.textContent) || 0;
            notificationBadge.textContent = currentCount + 1;
            notificationBadge.style.display = 'inline-block';
            
            // Auto-hide after 10 seconds
            setTimeout(() => {
                dismissNotification();
            }, 10000);
            
            // Play notification sound (if available)
            playNotificationSound();
        }

        // Dismiss Notification
        function dismissNotification() {
            const notificationPanel = document.getElementById('notificationPanel');
            const notificationBadge = document.getElementById('notificationBadge');
            
            notificationPanel.style.display = 'none';
            notificationBadge.style.display = 'none';
            notificationBadge.textContent = '0';
        }

        // Play Notification Sound
        function playNotificationSound() {
            try {
                const audio = new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBTGH0fPTgjMGHm7A7+OZURE');
                audio.play().catch(() => {});
            } catch (e) {}
        }

        // Switch to Section
        function switchToSection(sectionName) {
            document.querySelector(`[data-section="${sectionName}"]`).click();
        }

        // Check for Updates
        function checkForUpdates() {
            // This would typically check with a server
            // For now, we'll just refresh the dashboard stats
            updateDashboardStats();
            updateRecentPrayers();
            updateMessageCount();
        }

        // Message Management Functions
        function addMessage(messageData) {
            const messagesList = document.getElementById('messagesList');
            const newMessage = document.createElement('div');
            newMessage.className = 'message-item unread';
            newMessage.innerHTML = `
                <div class="message-header">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <strong class="message-name">${messageData.name}</strong>
                            <span class="badge bg-primary ms-2">${messageData.type}</span>
                            <span class="badge bg-warning ms-1">Unread</span>
                        </div>
                        <div class="text-end">
                            <small class="text-muted">Just now</small>
                            <div class="message-actions mt-1">
                                <button class="btn btn-sm btn-outline-primary me-1" onclick="replyToMessage(this)">
                                    <i class="fas fa-reply"></i>
                                </button>
                                <button class="btn btn-sm btn-outline-danger" onclick="deleteMessage(this)">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="message-contact">
                    <i class="fas fa-envelope text-muted me-2"></i>
                    <span>${messageData.email}</span>
                    <i class="fas fa-phone text-muted ms-3 me-2"></i>
                    <span>${messageData.phone || 'Not provided'}</span>
                </div>
                <div class="message-content">
                    <p>${messageData.message}</p>
                </div>
            `;
            
            messagesList.insertBefore(newMessage, messagesList.firstChild);
            updateMessageCount();
            showMessageNotification(messageData);
        }

        function replyToMessage(btn) {
            const messageItem = btn.closest('.message-item');
            const name = messageItem.querySelector('.message-name').textContent;
            const email = messageItem.querySelector('.message-contact span').textContent;
            
            // Mark as read
            messageItem.classList.remove('unread');
            const unreadBadge = messageItem.querySelector('.badge.bg-warning');
            if (unreadBadge) unreadBadge.remove();
            
            // Create reply modal or compose email
            const subject = encodeURIComponent('Re: Your message to Garden of Faith Church');
            const body = encodeURIComponent(`Dear ${name},\n\nThank you for your message. We have received it and will respond shortly.\n\n\nBlessings,\nGarden of Faith Church`);
            window.open(`mailto:${email}?subject=${subject}&body=${body}`);
            
            updateMessageCount();
        }

        function deleteMessage(btn) {
            if (confirm('Are you sure you want to delete this message?')) {
                btn.closest('.message-item').remove();
                updateMessageCount();
            }
        }

        function markAllAsRead() {
            const messages = document.querySelectorAll('.message-item.unread');
            messages.forEach(message => {
                message.classList.remove('unread');
                const unreadBadge = message.querySelector('.badge.bg-warning');
                if (unreadBadge) unreadBadge.remove();
            });
            updateMessageCount();
        }

        function updateMessageCount() {
            const unreadMessages = document.querySelectorAll('.message-item.unread').length;
            const messageCount = document.getElementById('messageCount');
            const notificationBadge = document.getElementById('notificationBadge');
            
            if (unreadMessages > 0) {
                messageCount.textContent = unreadMessages;
                messageCount.style.display = 'inline-block';
                notificationBadge.textContent = unreadMessages;
                notificationBadge.style.display = 'inline-block';
            } else {
                messageCount.style.display = 'none';
                notificationBadge.style.display = 'none';
            }
        }

        function showMessageNotification(messageData) {
            const notificationPanel = document.getElementById('notificationPanel');
            const notificationText = document.getElementById('notificationText');
            
            notificationText.innerHTML = `<i class="fas fa-envelope me-2"></i>New message from <strong>${messageData.name}</strong>: "${messageData.message.substring(0, 50)}..."`;
            notificationPanel.style.display = 'block';
            
            // Update badge
            const notificationBadge = document.getElementById('notificationBadge');
            const currentCount = parseInt(notificationBadge.textContent) || 0;
            notificationBadge.textContent = currentCount + 1;
            notificationBadge.style.display = 'inline-block';
            
            // Auto-hide after 10 seconds
            setTimeout(() => {
                dismissNotification();
            }, 10000);
            
            // Play notification sound
            playNotificationSound();
        }

        // Search and Filter Messages
        document.addEventListener('DOMContentLoaded', function() {
            const messageSearch = document.getElementById('messageSearch');
            const messageFilter = document.getElementById('messageFilter');
            
            if (messageSearch) {
                messageSearch.addEventListener('input', filterMessages);
            }
            
            if (messageFilter) {
                messageFilter.addEventListener('change', filterMessages);
            }
        });

        function filterMessages() {
            const searchTerm = document.getElementById('messageSearch').value.toLowerCase();
            const filterType = document.getElementById('messageFilter').value;
            const messages = document.querySelectorAll('.message-item');
            
            messages.forEach(message => {
                const name = message.querySelector('.message-name').textContent.toLowerCase();
                const content = message.querySelector('.message-content p').textContent.toLowerCase();
                const type = message.querySelector('.badge.bg-primary, .badge.bg-success')?.textContent.toLowerCase() || '';
                
                const matchesSearch = name.includes(searchTerm) || content.includes(searchTerm);
                const matchesFilter = filterType === 'all' || type.includes(filterType.toLowerCase());
                
                message.style.display = matchesSearch && matchesFilter ? 'block' : 'none';
            });
        }
</script>
</body>
</html>
